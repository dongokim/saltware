/* jquery.muslider v.2.0 | (c) 2012, 2014 Federica Sibella musings(at)musings(dot)it | http://www.musings.it | MIT license */
(function(e){function w(a){var b=e("#slide"+a.instance+"_"+a.current),c=b.find("img");if(0<c.length){c.attr("src")!=c.attr("data-src")&&c.attr("src",c.attr("data-src"));if("adjust"==a.options.ratio){var d=new Image;d.onload=function(){var b=a.slider,c=a.slide,e=Math.round(d.height/d.width*a.calc_width);c.css({height:e});c.children("img,video,iframe").css({height:e});b.css({height:e})};d.src=c.attr("src")}0==b.find(".caption").length&&void 0!=c.attr("title")&&""!=c.attr("title")&&b.append("<div class='caption'><p>"+
c.attr("title")+"</p></div>").promise().done(function(){var a=b.find(".caption").outerHeight(!0);b.find(".caption").css({bottom:-a}).delay(800).animate({bottom:0},300)})}}function u(a){a=e("#slide"+a.instance+"_"+a.current);if(0<a.find(".caption").length){var b=a.find(".caption").outerHeight(!0);a.find(".caption").css({bottom:-b}).delay(800).animate({bottom:0},300)}}function y(a,b,c){var d=e("#slide"+a.instance+"_"+a.current),r=e("#slide"+a.instance+"_"+b);b=a.options;var g=a.calc_width,n=a.calc_height,
p=0,l=0;"n"==c?(p=g+a.margin,l=n+a.margin):"p"==c&&(p=-(g+a.margin),l=-(n+a.margin));switch(b.animation_type){case "horizontal":d.css({left:p}).show();r.animate({left:-p},b.animation_duration,function(){r.hide().toggleClass("active")});d.animate({left:0},b.animation_duration,function(){e(this).toggleClass("active")});break;case "vertical":d.css({top:l}).show();r.animate({top:-l},b.animation_duration,function(){r.hide().toggleClass("active")});d.animate({top:0},b.animation_duration,function(){e(this).toggleClass("active")});
break;case "fade":r.fadeOut(b.animation_duration).toggleClass("active"),d.fadeIn(b.animation_duration,function(){e(this).toggleClass("active")})}}function z(a,b){var c=e("#slide"+a+"_"+b);c.children().is("audio,video")&&(c=c.children("audio,video"),!1===c[0].paused&&c[0].pause())}function q(a){if("string"===typeof a){var b=a.indexOf("_");-1!=b&&(a=a.substr(b+1))}return a}function t(a,b){var c=a;"string"===typeof a&&-1!=a.indexOf("%")&&(c=parseInt(a.slice(0,-1))/100,c=parseInt(b*c));return c}function B(a){var b=
a.slider,c=a.slide,d=a.options,g=a.options.max_width,k=a.options.max_height,n=a.options.min_width,p=a.options.min_height,l=a.slider_ratio,h=a.calc_width,f=a.calc_height,h=Math.min(b.parent().width(),e(window).width()-40);if("initial"==d.ratio)l=A("muslider_ratio");else if("continuous"==d.ratio)l=t(d.width,e(window).width()),l=t(d.height,e(window).height())/l;else if("adjust"==a.options.ratio){var d=e("#slide"+a.instance+"_"+a.current).find("img"),m=new Image;m.onload=function(){var a=Math.round(m.height/
m.width*h);c.css({height:a});c.children("img,video,iframe").css({height:a});b.css({height:a})};m.src=d.attr("src")}f=Math.round(h*l);0<g&&h>g&&(h=g,f=Math.round(h*l),0<k&&f>k&&(f=k));0<k&&f>k&&(f=k,h=Math.round(f/l),0<g&&h>g&&(h=g));h<n&&(h=n,f=Math.round(h*l),f<p&&(f=p));f<p&&(f=p,h=Math.round(f/l),h<n&&(h=n));c.css({width:h,height:f});c.children("img,video,iframe").css({width:h,height:f});b.css({width:h,height:f});a.calc_width=h;a.calc_height=f;a.slide=c;a.slider=b;return a}function C(a,b,c){if(c){var d=
new Date;d.setTime(d.getTime()+864E5*c);c="; expires="+d.toGMTString()}else c="";document.cookie=a+"="+b+c+"; path=/"}function A(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null}var g=[],k=0,v={init:function(a){this.each(function(){var b=e(this),c=b.data("muslider"),d=e(),c=e(),r=e(),q=e(),n=e(),p=e(),l=e(),h=0,f=0.565,m=0,s=0,d=e.extend({width:"100%",height:"100%",
max_width:0,max_height:0,reference_width:0,reference_height:0,min_width:320,min_height:180,ratio:0.5625,animation_type:"horizontal",animation_duration:600,animation_start:"manual",animation_interval:4E3,responsive:"yes"},a);switch(d.responsive){default:d.responsive=!0;break;case "no":case !1:case 0:d.responsive=!1}b.attr("data-id","muslider_"+k);c=b.find(".slide");h=c.length-1;c.each(function(a){e(this).attr("id","slide"+k+"_"+a)});r=b.next(".navslide");q=r.find(".start").attr("data-id","start_"+
k);n=r.find(".stop").attr("data-id","stop_"+k);p=r.find(".next").attr("data-id","next_"+k);l=r.find(".prev").attr("data-id","prev_"+k);if(!1===d.responsive)"number"==typeof d.height&&"number"==typeof d.width?(f=d.height/d.width,m=d.width):m=t(d.width,b.parent().width());else if(m=t(d.width,b.parent().width()),"number"==typeof d.ratio)f=d.ratio;else switch(d.ratio){default:f=0.5625;break;case "reference":"number"===typeof d.reference_height&&"number"===typeof d.reference_width&&0<d.reference_width&&
0<d.reference_height&&(f=d.reference_height/d.reference_width);break;case "maximum":"number"===typeof d.max_height&&"number"===typeof d.max_width&&0<d.max_width&&0<d.max_height&&(f=d.max_height/d.max_width);break;case "initial":f=A("muslider_ratio");if(null==f||"undefined"==f)m=t(d.width,e(window).width()),s=t(d.height,e(window).height()),f=s/m,C("muslider_ratio",f);break;case "continuous":m=t(d.width,e(window).width()),s=t(d.height,e(window).height()),f=s/m}s=Math.round(m*f);c.css({"box-sizing":"content-box",
width:m,height:s,top:0,left:0});if("undefined"!=typeof c.children("img").attr("data-src")&&c.children("img").attr("src")!=c.children("img").attr("data-src")){var v=c.children("img").attr("src");c.children("img").css({background:"url("+v+") no-repeat center center"})}c.children("img,video,iframe").css({"box-sizing":"content-box",width:m,height:s});c.not(":first").hide();c.filter(":first").toggleClass("active");b.css({"box-sizing":"content-box",width:m,height:s});b.data("muslider",{slider:b,slide:c,
totslides:h,margin:100,navslide:r,start:q,stop:n,prev:l,next:p,current:0,timer:0,options:d,instance:k,slider_ratio:f,calc_width:m,calc_height:s});w(b.data("muslider"));p.on("click",function(a){a.preventDefault();e.fn.muslider("next",e(this).attr("data-id"))});l.on("click",function(a){a.preventDefault();e.fn.muslider("prev",e(this).attr("data-id"))});n.on("click",function(a){a.preventDefault();e.fn.muslider("stop",e(this).attr("data-id"));e(this).hide();q.show()});q.on("click",function(a){a.preventDefault();
e.fn.muslider("start",e(this).attr("data-id"));e(this).hide();n.show()});var u,x;e(document).on("touchstart",b,function(a){u=(void 0==a.originalEvent.touches?a:a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]).pageX});e(document).on("touchend",b,function(a){a=void 0==a.originalEvent.touches?a:a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];e(this).offset();x=a.pageX-u;-5>x?p.trigger("click"):5<x&&l.trigger("click")});c=b.data("muslider");g[k]=c;!0===d.responsive&&e.fn.muslider("resize",
k);"auto"==d.animation_start?(n.show(),q.hide(),e.fn.muslider("start",k)):"manual"==d.animation_start&&(e.fn.muslider("stop",k),n.hide(),q.hide());k++;return g})},next:function(a){a=q(a);var b=g[a],c=b.current;b.current++;b.current>b.totslides&&(b.current=0);z(a,c);w(b);y(b,c,"n");u(b);g[a]=b;return g},prev:function(a){a=q(a);var b=g[a],c=b.current;b.current--;0>b.current&&(b.current=b.totslides);z(a,c);w(b);y(b,c,"p");u(b);g[a]=b;return g},resize:function(a){a=q(a);var b=g[a];!0===b.options.responsive&&
(b=B(b));g[a]=b;return g},start:function(a){a=q(a);var b=g[a];0!=b.timer&&clearInterval(b.timer);b.timer=setInterval(function(){e.fn.muslider("next",a)},b.options.animation_interval);g[a]=b;return g},stop:function(a){a=q(a);var b=g[a];clearInterval(b.timer);g[a]=b;return g},destroy:function(){id=q(e(this).attr("data-id"));var a=g[id];a.prev.off();a.next.off();e.fn.muslider("stop",id);e.removeData(a,this.name);this.removeClass(this.name);this.unbind();this.element=null}};e(window).resize(function(){for(i=
0;i<k;i++)e.fn.muslider("resize",i)});e.fn.muslider=function(a){if(v[a])return v[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)e.error("Method "+a+" does not exist on jQuery.muslider");else return v.init.apply(this,arguments)}})(jQuery);